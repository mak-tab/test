# üìö Library API

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–ª–æ–∂–µ–∫.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT)
- CRUD –¥–ª—è –∫–Ω–∏–≥ (—Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥ (—Ñ–∞–π–ª—ã)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON-—Ñ–∞–π–ª–∞—Ö (–±–µ–∑ –°–£–ë–î)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- CORS –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ .env

---

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É:**
   ```bash
   git clone <repo_url>
   cd abctest
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
   ```bash
   python -m venv venv
   venv\Scripts\activate  # Windows
   source venv/bin/activate  # Linux/Mac
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

4. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `abctest` –∏ –¥–æ–±–∞–≤—å—Ç–µ:**
   ```
   SECRET_KEY=your_secret_key
   ALGORITHM=HS256
   TOKEN_MINUTE=30
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   uvicorn main:app --reload
   ```

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:**  
   –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:8000/docs](http://localhost:8000/docs)

---

## üóÑÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–Ω–∏–≥ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö `users.json` –∏ `storage.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
- –û–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `uploads/`.

---

## üìë –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**POST** `/reg`
```json
{
  "username": "user1",
  "password": "pass123"
}
```
**–û—Ç–≤–µ—Ç:**  
- `201 Created` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω  
- `400 Bad Request` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–æ–≥–∏–Ω)

**POST** `/log`
```json
{
  "username": "user1",
  "password": "pass123"
}
```
**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT-—Ç–æ–∫–µ–Ω  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ  
- **–õ–∏–º–∏—Ç:** 5 –ø–æ–ø—ã—Ç–æ–∫ –≤ –º–∏–Ω—É—Ç—É

---

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–î–ª—è –≤—Å–µ—Ö –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Authorization: Bearer <access_token>
```

---

### –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ

**GET** `/users/me`  
**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç

**DELETE** `/users/me`  
**–û—Ç–≤–µ—Ç:**  
- `204 No Content` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—ë–Ω  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥

**GET** `/books`  
**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –º–∞—Å—Å–∏–≤ –∫–Ω–∏–≥ (—Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –æ–±–ª–æ–∂–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å)

---

### –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID

**GET** `/books/{book_id}`  
**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –æ–±—ä–µ–∫—Ç –∫–Ω–∏–≥–∏  
- `404 Not Found` ‚Äî –∫–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

---

### –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É

**POST** `/books`  
```json
{
  "title": "1984",
  "author": "George Orwell"
}
```
**–û—Ç–≤–µ—Ç:**  
- `201 Created` ‚Äî –∫–Ω–∏–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É

**PUT** `/books/{book_id}`  
```json
{
  "title": "New Title",
  "author": "New Author"
}
```
**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –∫–Ω–∏–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞  
- `404 Not Found` ‚Äî –∫–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É

**DELETE** `/books/{book_id}`  
**–û—Ç–≤–µ—Ç:**  
- `204 No Content` ‚Äî –∫–Ω–∏–≥–∞ —É–¥–∞–ª–µ–Ω–∞  
- `404 Not Found` ‚Äî –∫–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–ª–æ–∂–∫—É –∫–Ω–∏–≥–∏

**POST** `/books/{book_id}/cover`  
- –§–æ—Ä–º–∞—Ç: multipart/form-data, –ø–æ–ª–µ `file`
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äî –æ–±–ª–æ–∂–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞  
- `404 Not Found` ‚Äî –∫–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

### –£–¥–∞–ª–∏—Ç—å –æ–±–ª–æ–∂–∫—É –∫–Ω–∏–≥–∏

**DELETE** `/books/{book_id}/cover`  
**–û—Ç–≤–µ—Ç:**  
- `204 No Content` ‚Äî –æ–±–ª–æ–∂–∫–∞ —É–¥–∞–ª–µ–Ω–∞  
- `404 Not Found` ‚Äî –∫–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞  
- `401 Unauthorized` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

## ‚ö†Ô∏è –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `200 OK` ‚Äî —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `201 Created` ‚Äî —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
- `204 No Content` ‚Äî —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ, —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –ø—É—Å—Ç–æ–µ
- `400 Bad Request` ‚Äî –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–ª–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- `401 Unauthorized` ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω/–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω
- `404 Not Found` ‚Äî –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `422 Unprocessable Entity` ‚Äî –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- `429 Too Many Requests` ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `main.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
- `requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `README.md` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `users.json`, `storage.json` ‚Äî —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `uploads/` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥
